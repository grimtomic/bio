<!DOCTYPE HTML>
<html xmlns:align-items="http://www.w3.org/1999/xhtml">
<head>
    <title>ashley</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="icon" href="https://openclipart.org/image/800px/344819" type="image/png">
</head>
<body>
    <main>
        <div class="layout">
            <div style="margin-top: 35px; display: flex; align-items: center;">
                <div class="col-md-4" style="margin-right: 20px;">
                    <div class="image-container" style="align-items: right: ;">
                        <img src="https://cdn.pronouns.cc/users/cvsl78nm985vdppbqfvg/8bbb36756c1434eab977ee29a7fcc08933306568d61b9be4406e3da406272cc0.webp" alt=" " class="avatar__44b0c" aria-hidden="true">
                    </div>
                </div>
                <div class="background-colour">
                    <p class="name" style="white-space: pre;">Hai! im <b>ashley</b></p>
                    <p class="subtext" style="margin-top: -40px;">she/they ∙ dreaming peacefully</p>
                    <div style="margin-top: -20px; display: flex;" class="col-md">
                        <div style="align-items: center; margin-right: 10px;">
                            <p>Music &#127911; <span id="song-info">&#8987;</span></p>
                        </div>
                    </div>
                    <div style="margin-top: -15px;">
                        <span id="play-status"></span></p>
                    </div>
                </div>
            </div>
            <div style="margin-top: 35px; display: flex; align-items: top;">
                <div style="margin-right: 10px;">
                    <div>
                        <h2>About me</h2>
                    </div>
                    <div class="container" style="text-align: left;">
                        <p>As you might have gathered my name is Ashley,
                        <br>
                        slowly learning to code & self hosting this page with nginx and anubis
                        <br> <br>
                        I play games in my spare time, currently playing ∙ Silksong - Minecraft - Blasphemous
                        <br><br>
                        see my pronouns.cc <a href="https://pronouns.cc/@ashleigh">here</a> ∙ pfp made by @.watori on discord
                        </p>
                    </div>
                </div>
                <div id="image-container" style="align-self: center;">
                    <p>Loading image...</p>
                </div> 
            </div>
            <div class="col-md" style="text-align: left; align-self: left">
                <h2>Vistor Count</h2>
                <img src="https://count.getloli.com/@grimtomic?name=grimtomic&theme=asoul&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto" alt="name"/>
            </div>
            <footer>
            © 2025, Ashley
            <br>
            Made with <a>❤</a> by Ashley
            <br>
            Site licensed under <a href="https://github.com/grimtomic/grimtomic/blob/Website-V3/LICENSE">Apache-2.0</a> ∙ <a href="https://github.com/grimtomic/grimtomic/tree/Website-V3">Source</a>
            </footer>
        </div>
    </main>
</body>
<script type="text/javascript">
    function formatRelativeTime(unixTimestamp) {
        const now = new Date();
        const playedDate = new Date(unixTimestamp * 1000);
        const secondsAgo = Math.round((now - playedDate) / 1000);
        const minute = 60, hour = 3600, day = 86400, week = 604800, month = 2629800, year = 31557600;
        const rtf = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });

        if (secondsAgo < minute) return rtf.format(-secondsAgo, 'second');
        if (secondsAgo < hour) return rtf.format(-Math.floor(secondsAgo / minute), 'minute');
        if (secondsAgo < day) return rtf.format(-Math.floor(secondsAgo / hour), 'hour');
        if (secondsAgo < week) return rtf.format(-Math.floor(secondsAgo / day), 'day');
        if (secondsAgo < month) return rtf.format(-Math.floor(secondsAgo / week), 'week');
        if (secondsAgo < year) return rtf.format(-Math.floor(secondsAgo / month), 'month');
        return rtf.format(-Math.floor(secondsAgo / year), 'year');
    }

    const user = 'grimtomic';
    const url = `https://lastfm-last-played.biancarosa.com.br/${user}/latest-song`;
    const songInfoElement = document.querySelector('#song-info');
    const playStatusElement = document.querySelector('#play-status');

    fetch(url)
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
        })
        .then(json => {
            const trackName = json['track']['name'];
            const artistName = json['track']['artist']['#text'];
            const trackUrl = json['track']['url'];
            const songInfo = `<a href="${trackUrl}" target="_blank" rel="noopener noreferrer">${trackName} - ${artistName}</a>`;
            songInfoElement.innerHTML = songInfo;

            let playStatus = '';
            if (json['track']['@attr'] && json['track']['@attr']['nowplaying'] === 'true') {
                playStatus = 'Currently Playing';
            } else {
                const unixTimestamp = parseInt(json['track']['date']['uts'], 10);
                playStatus = formatRelativeTime(unixTimestamp);
            }
            playStatusElement.innerHTML = playStatus;
        })
        .catch(error => {
            songInfoElement.innerHTML = 'Could not fetch last played song.';
            playStatusElement.innerHTML = `Error: ${error.message}`;
            console.error('There has been a problem with your fetch operation:', error);
        });
</script>
<script>
    const apiUrl = 'https://nekos.best/api/v2/neko';
    const imageContainer = document.querySelector('#image-container');

    fetch(apiUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error(`Network response was not ok (Status: ${response.status})`);
            }
            return response.json();
        })
        .then(json => {
            const imageUrl = json.results[0].url;
            const imgElement = document.createElement('img');
            imgElement.src = imageUrl;
            imgElement.alt = 'Image from nekos.best API'; 
            imageContainer.innerHTML = '';
            imageContainer.appendChild(imgElement);
        })
        .catch(error => {
            imageContainer.textContent = 'Failed to load image.';
            console.error('There was a problem with the fetch operation:', error);
        });
</script>